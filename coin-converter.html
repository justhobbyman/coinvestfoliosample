<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coin Converter</title>
</head>
<body>
  <select id="coinSelect"></select>
  <select id="currencySelect">
    <option value="USD">USD</option>
    <option value="EUR">EUR</option>
    <option value="GBP">GBP</option>
    <option value="KRW">KRW</option>
    <option value="JPY">JPY</option>
    <option value="CAD">CAD</option>
    <option value="AUD">AUD</option>
  </select>
  <input type="number" id="coinAmount" placeholder="Amount" value="1">
  <button onclick="fetchPrice()">Get Price</button>
  <div id="priceResult"></div>
  <script src="js/coin-converter.js"></script>
  <script>
     async function fetchPrice() {
        const coin = document.getElementById('coinSelect').value;
        const currency = document.getElementById('currencySelect').value;
        const amount = parseFloat(document.getElementById('coinAmount').value);

        try {
            const pricePerCoin = await getCryptoPrice(coin, currency);
            const totalPrice = (pricePerCoin * amount).toFixed(4); // 계산된 총 가격도 소수점 4자리까지만 표시
            document.getElementById('priceResult').innerText = `${amount} ${coin.toUpperCase()} = ${totalPrice} ${currency.toUpperCase()}`;
        } catch (error) {
            console.error("Error fetching price:", error);
            document.getElementById('priceResult').innerText = "Error fetching price. Please try again.";
        }
    }

    async function loadCoinOptions() {
        try {
            const coins = await loadTop50CoinsByVolume();
            const coinSelect = document.getElementById('coinSelect');
            coins.forEach(coin => {
                const option = document.createElement('option');
                option.value = coin.symbol;
                option.textContent = coin.name;
                coinSelect.appendChild(option);
            });
        } catch (error) {
            console.error('Error loading coin options:', error);
        }
    }

    window.addEventListener('DOMContentLoaded', loadCoinOptions);
  </script>
</body>
</html>

